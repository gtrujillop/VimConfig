#!/usr/bin/env bash

case "$rvm_ruby_string" in
  *ree*|*ruby-1.9.*)
    export RUBY_HEAP_MIN_SLOTS=2000000
    export RUBY_HEAP_SLOTS_INCREMENT=1000000
    export RUBY_HEAP_SLOTS_GROWTH_FACTOR=1
    export RUBY_GC_MALLOC_LIMIT=1000000000
    export RUBY_HEAP_FREE_MIN=20000
    export RUBY_FREE_MIN=$RUBY_HEAP_FREE_MIN
    ;;
  *ruby-2.1.*)
    unset RUBY_HEAP_MIN_SLOTS RUBY_HEAP_SLOTS_INCREMENT RUBY_HEAP_SLOTS_GROWTH_FACTOR RUBY_GC_MALLOC_LIMIT RUBY_HEAP_FREE_MIN RUBY_FREE_MIN
    export RUBY_GC_MALLOC_LIMIT=90000000
    ;;
  *)
    unset RUBY_HEAP_MIN_SLOTS RUBY_HEAP_SLOTS_INCREMENT RUBY_HEAP_SLOTS_GROWTH_FACTOR RUBY_GC_MALLOC_LIMIT RUBY_HEAP_FREE_MIN RUBY_FREE_MIN
    ;;
esac

